ãªã‚‹ã»ã©ã€ã‚„ã‚ŠãŸã„ã“ã¨ã¯

1. **Pythonå´ï¼ˆä»Šã®ã‚³ãƒ¼ãƒ‰ï¼‰ã§ã‚¨ãƒªã‚¢ã”ã¨ã®ã‚¹ã‚³ã‚¢ã‚’å–å¾—**
2. **ä¸€åº¦å–å¾—æ¸ˆã¿ã®ã‚¨ãƒªã‚¢ã¯ãã®ã‚»ãƒƒãƒˆã§ã¯å†å–å¾—ã—ãªã„**
3. **ã‚¹ã‚³ã‚¢å±¥æ­´ã‚’æœ€å¤§10ã‚»ãƒƒãƒˆåˆ†ã¾ã§ä¿å­˜**
4. **å±¥æ­´ã‚’HTMLã§ä¸€è¦§è¡¨ç¤ºãƒ»å–å¾—ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹**

ã§ã™ã­ã€‚

ã¾ãšã¯å…¨ä½“ã®æµã‚Œã‚’æ•´ç†ã—ã¦ã€ãã®ã‚ã¨HTMLã¨Flaskã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’æç¤ºã—ã¾ã™ã€‚

---

## ğŸ”¹ ãƒ‡ãƒ¼ã‚¿æ§‹é€ æ¡ˆ

* 1ã‚»ãƒƒãƒˆ = è¤‡æ•°ã®ã‚¨ãƒªã‚¢ï¼ˆ`area_0`, `area_1`, ...ï¼‰ã®ã‚¹ã‚³ã‚¢
* æœ€å¤§10ã‚»ãƒƒãƒˆä¿æŒï¼ˆå¤ã„ã‚»ãƒƒãƒˆã‹ã‚‰å‰Šé™¤ï¼‰
* ãƒ¡ãƒ¢ãƒªä¸Šã§ä¿æŒã€çµ‚äº†æ™‚ã¯JSONä¿å­˜ï¼ˆå¿…è¦ãªã‚‰å†èµ·å‹•å¾Œã‚‚èª­ã¿è¾¼ã¿å¯èƒ½ã«ï¼‰

ä¾‹ï¼š

```python
history_data = [
    {
        "timestamp": "2025-08-12 12:34:56",
        "scores": {
            "area_0": 85,
            "area_1": 90,
            "area_2": 72
        }
    },
    ...
]
```

---

## ğŸ”¹ Flaskã§ã®ã‚µãƒ¼ãƒãƒ¼æ§‹æˆ

* `/` â†’ æœ€æ–°ã‚»ãƒƒãƒˆã®ã‚¹ã‚³ã‚¢ä¸€è¦§è¡¨ç¤º
* `/history` â†’ å…¨å±¥æ­´ï¼ˆæœ€å¤§10ã‚»ãƒƒãƒˆåˆ†ï¼‰è¡¨ç¤º
* `/history.json` â†’ JSONå½¢å¼ã§å±¥æ­´å–å¾—ï¼ˆå¤–éƒ¨ã‚¢ãƒ—ãƒªã‚„JSç”¨ï¼‰

---

## ğŸ”¹ HTMLã‚µãƒ³ãƒ—ãƒ«ï¼ˆtemplates/index.htmlï¼‰

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ã‚¹ã‚³ã‚¢è¡¨ç¤º</title>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        th { background-color: #f0f0f0; }
    </style>
</head>
<body>
    <h1>æœ€æ–°ã‚»ãƒƒãƒˆ ã‚¹ã‚³ã‚¢</h1>
    <p>å–å¾—æ—¥æ™‚: {{ latest.timestamp }}</p>
    <table>
        <tr>
            <th>ã‚¨ãƒªã‚¢</th>
            <th>ã‚¹ã‚³ã‚¢</th>
        </tr>
        {% for area, score in latest.scores.items() %}
        <tr>
            <td>{{ area }}</td>
            <td>{{ score }}</td>
        </tr>
        {% endfor %}
    </table>

    <p><a href="/history">å±¥æ­´ã‚’è¦‹ã‚‹</a></p>
</body>
</html>
```

---

## ğŸ”¹ å±¥æ­´ãƒšãƒ¼ã‚¸ï¼ˆtemplates/history.htmlï¼‰

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ã‚¹ã‚³ã‚¢å±¥æ­´</title>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        th { background-color: #f0f0f0; }
    </style>
</head>
<body>
    <h1>ã‚¹ã‚³ã‚¢å±¥æ­´ï¼ˆæœ€å¤§10ã‚»ãƒƒãƒˆï¼‰</h1>
    {% for set in history %}
    <h2>{{ set.timestamp }}</h2>
    <table>
        <tr>
            <th>ã‚¨ãƒªã‚¢</th>
            <th>ã‚¹ã‚³ã‚¢</th>
        </tr>
        {% for area, score in set.scores.items() %}
        <tr>
            <td>{{ area }}</td>
            <td>{{ score }}</td>
        </tr>
        {% endfor %}
    </table>
    {% endfor %}
    <p><a href="/">æœ€æ–°ã«æˆ»ã‚‹</a></p>
</body>
</html>
```

---

## ğŸ”¹ Flaské€£æºã‚µãƒ³ãƒ—ãƒ«ï¼ˆapp.pyï¼‰

```python
from flask import Flask, render_template, jsonify
import datetime

app = Flask(__name__)

# å±¥æ­´ï¼ˆãƒ¡ãƒ¢ãƒªä¿æŒï¼‰
history_data = []

def add_score_set(scores):
    global history_data
    history_data.insert(0, {
        "timestamp": datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S"),
        "scores": scores
    })
    if len(history_data) > 10:
        history_data.pop()

@app.route("/")
def index():
    if history_data:
        latest = history_data[0]
    else:
        latest = {"timestamp": "ãƒ‡ãƒ¼ã‚¿ãªã—", "scores": {}}
    return render_template("index.html", latest=latest)

@app.route("/history")
def history():
    return render_template("history.html", history=history_data)

@app.route("/history.json")
def history_json():
    return jsonify(history_data)

if __name__ == "__main__":
    app.run(host="0.0.0.0", port=5000)
```

---

## ğŸ”¹ QRç›£è¦–ã‚³ãƒ¼ãƒ‰ã¸ã®çµ±åˆã‚¤ãƒ¡ãƒ¼ã‚¸

1. **ã‚»ãƒƒãƒˆç®¡ç†**

   * ã‚¨ãƒªã‚¢å…¨ã¦åŸ‹ã¾ã£ãŸã‚‰ `add_score_set()` ã‚’å‘¼ã³å‡ºã—ã¦æ–°ã‚»ãƒƒãƒˆç™»éŒ²
   * ãã®å¾Œã€æ¬¡ã®ã‚»ãƒƒãƒˆã«å‘ã‘ã¦ã‚¨ãƒªã‚¢å–å¾—æ¸ˆã¿ãƒªã‚¹ãƒˆã‚’ã‚¯ãƒªã‚¢
2. **å–å¾—æ¸ˆã¿ã‚¨ãƒªã‚¢åˆ¤å®š**

   * `captured_areas`ï¼ˆsetå‹ï¼‰ã‚’ä½¿ã„ã€æ—¢ã«å–å¾—æ¸ˆã¿ãªã‚‰ã‚¹ã‚­ãƒƒãƒ—

---

```python
captured_areas = set()
current_scores = {}
ALL_AREAS = {"area_0", "area_1", "area_2"}  # å…¨ã‚¨ãƒªã‚¢å®šç¾©

def process_area(area_key, path):
    global captured_areas, current_scores
    if area_key in captured_areas:
        print(f"{area_key} ã¯å–å¾—æ¸ˆã¿ã§ã™ã€ã‚¹ã‚­ãƒƒãƒ—")
        return
    score = score_calculation.calculate_score(path, area_key, AREA_DATA_PATH)
    current_scores[area_key] = score
    captured_areas.add(area_key)
    print(f"ã‚¹ã‚³ã‚¢ç™»éŒ²: {area_key} = {score}")

    # å…¨ã‚¨ãƒªã‚¢æƒã£ãŸã‚‰1ã‚»ãƒƒãƒˆç¢ºå®š
    if captured_areas == ALL_AREAS:
        add_score_set(current_scores)
        print("1ã‚»ãƒƒãƒˆå®Œäº†ã€å±¥æ­´è¿½åŠ ")
        captured_areas.clear()
        current_scores = {}
```

---

ã“ã†ã™ã‚‹ã¨

* æœªå–å¾—ã®ã‚¨ãƒªã‚¢ã ã‘å‡¦ç†
* å…¨éƒ¨æƒã£ãŸã‚‰å±¥æ­´ã«è¿½åŠ 
* Flaskã§HTMLé–²è¦§ï¼†JSONå–å¾—å¯èƒ½
  ã«ãªã‚Šã¾ã™ã€‚

---

ã‚‚ã—ã“ã®ã‚ã¨**QRã‚³ãƒ¼ãƒ‰ç›£è¦–ãƒ«ãƒ¼ãƒ—ã¨Flaskã‚µãƒ¼ãƒãƒ¼ã‚’åŒæ™‚ã«å‹•ã‹ã™æ§‹æˆ**ã‚‚å¿…è¦ãªã‚‰ã€ã‚¹ãƒ¬ãƒƒãƒ‰ã‚„ãƒãƒ«ãƒãƒ—ãƒ­ã‚»ã‚¹åŒ–ã®ä¾‹ã‚‚ä½œã‚Œã¾ã™ãŒã€å…ˆã«ãã£ã¡ã‚‚å‡ºã—ã¾ã™ã‹ï¼Ÿ
åŒæ™‚å‹•ä½œã«ã—ãªã„ã¨ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ã®é–²è¦§ã¨è¨ˆæ¸¬å‡¦ç†ãŒä¸¦è¡Œã§ããªã„ã®ã§ã€ãã®éƒ¨åˆ†ã‚‚é‡è¦ã§ã™ã€‚
